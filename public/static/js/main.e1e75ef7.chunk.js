(this["webpackJsonpvacation-react"]=this["webpackJsonpvacation-react"]||[]).push([[0],{179:function(e,t,n){},180:function(e,t,n){},28:function(e,t){e.exports={domain:"https://vacationssss.herokuapp.com"}},291:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(47),s=n.n(c),o=(n(179),n(180),n(16)),i=n.n(o),l=n(26),u=n(15),j=n(17),d=n(301),b=n(159),p=n(28),h=n(3);function O(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),o=s[0],O=s[1],x=Object(j.f)();function f(){return(f=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n&&""!==o){e.next=2;break}return e.abrupt("return",alert("user name or password empty"));case 2:return e.prev=2,e.next=5,fetch(p.domain+"/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user_name:n,password:o})});case 5:return t=e.sent,e.next=8,t.json();case 8:if(void 0===(a=e.sent)[0].user_id){e.next=16;break}if(localStorage.setItem("userInfo",JSON.stringify({userName:n,password:o,userId:a[0].user_id,isLoggedIn:!0,isAdmin:a[0].is_admin})),!a[0].is_admin){e.next=13;break}return e.abrupt("return",x.push("./VacationAdmin"));case 13:x.push("./VacationList"),e.next=17;break;case 16:"user name or password dosnet match"===a.error&&alert("user name or password dosnet match");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log("error fetching",e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})))).apply(this,arguments)}return Object(h.jsxs)(d.a,{style:{marginLeft:"35%"},children:[Object(h.jsx)("h2",{children:"Login form"}),Object(h.jsx)(d.a.Row,{children:Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustomUsername",children:[Object(h.jsx)(d.a.Label,{children:"Username"}),Object(h.jsx)(d.a.Control,{type:"text",placeholder:"Username",required:!0,onChange:function(e){return r(e.target.value)}})]})}),Object(h.jsx)(d.a.Row,{children:Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom03",children:[Object(h.jsx)(d.a.Label,{children:"Password"}),Object(h.jsx)(d.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:function(e){return O(e.target.value)}})]})}),Object(h.jsx)("button",{type:"button",onClick:function(){return f.apply(this,arguments)},children:"LogIn"}),Object(h.jsx)("button",{type:"button",onClick:function(){x.push("./SignUp")},style:{marginLeft:"20px"},children:"Register"})]})}function x(){var e=Object(j.f)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(u.a)(s,2),O=o[0],x=o[1],f=Object(a.useState)(""),m=Object(u.a)(f,2),g=m[0],v=m[1],y=Object(a.useState)(""),S=Object(u.a)(y,2),C=S[0],w=S[1];function I(){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r&&""!==O&&""!==g&&""!==C){e.next=3;break}return alert("all fildes are mandatori"),e.abrupt("return");case 3:return e.next=5,fetch(p.domain+"/signUp",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({first_name:r,last_name:O,user_name:g,password:C})});case 5:return t=e.sent,e.next=8,t.json();case 8:if("user name allready exzist"!==(n=e.sent)){e.next=11;break}return e.abrupt("return",alert(n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){e.push("LogIn")}return Object(h.jsx)("div",{children:Object(h.jsxs)(d.a,{style:{marginLeft:"2%"},children:[Object(h.jsx)("h2",{children:"Register form"}),Object(h.jsx)(d.a.Row,{children:Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom01",children:[Object(h.jsx)(d.a.Label,{children:"First name"}),Object(h.jsx)(d.a.Control,{onChange:function(e){return c(e.target.value)},required:!0,type:"text",placeholder:"First name"})]})}),Object(h.jsx)(d.a.Row,{children:Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom02",children:[Object(h.jsx)(d.a.Label,{children:"Last name"}),Object(h.jsx)(d.a.Control,{required:!0,type:"text",placeholder:"Last name",onChange:function(e){return x(e.target.value)}})]})}),Object(h.jsx)(d.a.Row,{children:Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustomuser_name",children:[Object(h.jsx)(d.a.Label,{children:"user_name"}),Object(h.jsx)(d.a.Control,{type:"text",placeholder:"user_name","aria-describedby":"inputGroupPrepend",required:!0,onChange:function(e){return v(e.target.value)}})]})}),Object(h.jsx)(d.a.Row,{children:Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom03",children:[Object(h.jsx)(d.a.Label,{children:"Password"}),Object(h.jsx)(d.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:function(e){return w(e.target.value)}})]})}),Object(h.jsx)("button",{type:"button",onClick:I,children:"SignUp"}),Object(h.jsx)("button",{type:"button",onClick:I,style:{marginLeft:"20px"},children:"Login"})]})})}function f(){var e=Object(j.f)();return Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){void 0!==e&&(localStorage.clear(),e.push("./LogIn"))},style:{float:"right",marginTop:"2%"},children:"log out"})})}var m=n(51),g=n(306);function v(){var e=Object(j.f)(),t="a";null===localStorage.getItem("userInfo")||!0===JSON.parse(localStorage.getItem("userInfo")).isAdmin?e.push("LogIn"):t=JSON.parse(localStorage.getItem("userInfo"));var n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(""),d=Object(u.a)(o,2),b=d[0],O=d[1],x=Object(a.useState)(""),v=Object(u.a)(x,2),y=v[0],S=v[1],C=Object(a.useState)(""),w=Object(u.a)(C,2),I=w[0],L=w[1];function k(){return(k=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p.domain+"/isFollow",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,vacation:n})});case 3:O(new Date),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function _(){return(_=Object(l.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p.domain+"/searchVacation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({search:y,date:I,user:t.userId})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,s(a[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.domain+"/vaction/".concat(t.userId));case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,s(a[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)(f,{}),Object(h.jsxs)("h1",{children:["hello ",t.userName]})]}),Object(h.jsxs)("div",{style:{marginLeft:"30%",marginRight:"30%"},children:[Object(h.jsx)("input",{type:"text",value:y,placeholder:"search by description",onChange:function(e){S(e.target.value)}}),Object(h.jsx)("input",{type:"date",onChange:function(e){L(e.target.value)}}),Object(h.jsx)(g.a,{variant:"outline-primary",size:"sm",onClick:function(){return _.apply(this,arguments)},children:"Search"}),Object(h.jsx)(g.a,{variant:"outline-primary",size:"sm",onClick:function(){O(new Date),S("")},children:"clear"})]}),Object(h.jsx)("br",{}),c.map((function(e){return Object(h.jsx)("div",{style:{float:"left",marginLeft:"5px"},children:Object(h.jsxs)(m.a,{className:"Card",style:{width:"15rem"},children:[Object(h.jsx)(m.a.Img,{variant:"top",src:e.image},e.image),Object(h.jsxs)(m.a.Text,{children:[Object(h.jsxs)("span",{style:{float:"right"},children:[Object(h.jsx)("input",{id:e.vac_id,type:"checkbox",checked:null!=e.follower_id,onChange:function(){return function(e){return k.apply(this,arguments)}(e.vac_id)},style:{float:"right",visibility:"hidden"}}),null!=e.follower_id?Object(h.jsx)("label",{htmlFor:e.vac_id,style:{float:"right"},children:"\u2764\ufe0f"}):Object(h.jsx)("label",{htmlFor:e.vac_id,style:{float:"right"},children:"\ud83e\udd0d"}),Object(h.jsx)("p",{style:{float:"right"},children:e.followers_mount})]}),"location: ",e.location,Object(h.jsx)("br",{}),"description: ",e.description,Object(h.jsx)("br",{}),"$",e.price,Object(h.jsx)("br",{}),"start: ",e.start_at,Object(h.jsx)("br",{}),"end: ",e.end_at,Object(h.jsx)("br",{}),Object(h.jsx)("p",{style:{textAlign:"left"},children:e.vac_id})]})]})})}))]})}var y=n(90),S=n(32);function C(){var e=Object(j.f)(),t=JSON.parse(localStorage.getItem("userInfo"));null!==localStorage.getItem("userInfo")&&0!=JSON.parse(localStorage.getItem("userInfo")).isAdmin||e.push("LogIn");var n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(""),O=Object(u.a)(o,2),x=O[0],v=O[1],C=Object(a.useState)(""),w=Object(u.a)(C,2),I=w[0],L=w[1],k=Object(a.useState)(""),_=Object(u.a)(k,2),A=_[0],T=_[1],N=Object(a.useState)(""),P=Object(u.a)(N,2),V=P[0],R=P[1],q=Object(a.useState)(""),G=Object(u.a)(q,2),J=G[0],F=G[1],U=Object(a.useState)([]),D=Object(u.a)(U,2),E=D[0],z=D[1],B=Object(a.useState)(0),H=Object(u.a)(B,2),W=H[0],$=H[1],M=Object(a.useState)(0),K=Object(u.a)(M,2),Q=K[0],X=K[1],Y=Object(a.useState)(0),Z=Object(u.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(0),ae=Object(u.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)(!1),oe=Object(u.a)(se,2),ie=oe[0],le=oe[1],ue=Object(a.useState)(""),je=Object(u.a)(ue,2),de=je[0],be=je[1];function pe(e,t){"edit"===e&&(s(t.description),v(t.location),L(t.image),T(t.start_at),R(t.end_at),F(t.price)),le(!0)}function he(){return(he=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3001/deleteVacation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({vacId:t})});case 2:$(new Date);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.domain+"/".concat(de),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({description:c,location:x,image:I,start_at:A,end_at:V,price:J,vac_id:re})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),le(!1),X(new Date);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.domain+"/vactionAdmin");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,z(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W,Q]),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{}),Object(h.jsx)("button",{onClick:function(){pe(),be("addVacation"),te("")},style:{marginTop:"2%",marginRight:"2%",float:"right"},children:"add vacation"}),Object(h.jsx)(S.b,{to:"/component/Statistics",children:"Statistics"}),Object(h.jsxs)("h1",{style:{textAlign:"center",marginTop:"0%"},children:["hello ",t.userName]}),E.map((function(e){return Object(h.jsx)("div",{style:{float:"left",marginLeft:"5px"},children:Object(h.jsxs)(m.a,{className:"Card",style:{width:"15rem"},children:[Object(h.jsx)(g.a,{size:"sm",variant:"",onClick:function(){return function(e){return he.apply(this,arguments)}(e.vac_id)},children:"\u274c"}),Object(h.jsx)(m.a.Img,{variant:"top",src:e.image},e.image),Object(h.jsx)(g.a,{size:"sm",variant:"",onClick:function(){pe("edit",e),te(e),be("editVacation"),ce(e.vac_id)},style:{color:"gray",float:"right",marginRight:"5px"},children:"\ud83d\udd8b"}),Object(h.jsxs)(m.a.Text,{children:[Object(h.jsxs)("p",{style:{float:"right"},children:["followers: ",e.followers_mount]}),"location: ",e.location,Object(h.jsx)("br",{}),"description: ",e.description,Object(h.jsx)("br",{}),"$",e.price,Object(h.jsx)("br",{}),"start: ",e.start_at,Object(h.jsx)("br",{}),"end: ",e.end_at,Object(h.jsx)("br",{}),Object(h.jsx)("p",{style:{textAlign:"left"},children:e.vac_id})]})]})})})),Object(h.jsxs)(y.a,{show:ie,onHide:function(){return le(!1)},children:[Object(h.jsx)(y.a.Header,{closeButton:!0}),Object(h.jsx)(y.a.Body,{children:Object(h.jsxs)(d.a,{style:{marginLeft:"2%",marginRight:"2%"},children:[Object(h.jsxs)(d.a.Row,{children:[Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom01",children:[Object(h.jsx)(d.a.Label,{children:"Description"}),Object(h.jsx)(d.a.Control,{onChange:function(e){s(e.target.value)},required:!0,type:"text",placeholder:"Description",defaultValue:ee.description})]}),Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom03",children:[Object(h.jsx)(d.a.Label,{children:"Price"}),Object(h.jsx)(d.a.Control,{onChange:function(e){return F(e.target.value)},type:"number",placeholder:"Price",required:!0,defaultValue:ee.price})]})]}),Object(h.jsxs)(d.a.Row,{children:[Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom02",children:[Object(h.jsx)(d.a.Label,{children:"Location"}),Object(h.jsx)(d.a.Control,{onChange:function(e){return v(e.target.value)},required:!0,type:"text",placeholder:"Location",defaultValue:ee.location})]}),Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustomUsername",children:[Object(h.jsx)(d.a.Label,{children:"Image"}),Object(h.jsx)(d.a.Control,{onChange:function(e){return L(e.target.value)},type:"text",placeholder:"Image","aria-describedby":"inputGroupPrepend",required:!0,defaultValue:ee.image})]})]}),Object(h.jsxs)(d.a.Row,{children:[Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom03",children:[Object(h.jsx)(d.a.Label,{children:"Start"}),Object(h.jsx)(d.a.Control,{onChange:function(e){return T(e.target.value)},type:"date",placeholder:"Start",required:!0,defaultValue:ee.start_at})]}),Object(h.jsxs)(d.a.Group,{as:b.a,md:"4",controlId:"validationCustom03",children:[Object(h.jsx)(d.a.Label,{children:"End"}),Object(h.jsx)(d.a.Control,{onChange:function(e){return R(e.target.value)},type:"date",placeholder:"End",required:!0,defaultValue:ee.end_at})]})]}),Object(h.jsx)(g.a,{type:"button",onClick:function(){return function(){return Oe.apply(this,arguments)}()},children:"send"})]})})]})]})}var w=n(302),I=n(307),L=n(303);function k(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.domain+"/vacationFollowed");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r(n[0].map((function(e){return{quarter:"vacation "+e.vac_id,earnings:e.followers_mount}})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)(S.b,{to:"/component/VacationAdmin",children:"vacation"}),Object(h.jsx)("div",{style:{width:"50%",height:"40%"},children:Object(h.jsx)(w.a,{theme:I.a.material,domainPadding:{x:30},children:Object(h.jsx)(L.a,{style:{data:{fill:"#c43a31",stroke:"black",strokeWidth:2}},barWidth:function(e){return 2*e.index+8},data:n,alignment:"start",x:"quarter",y:"earnings"})})})]})}n(290);function _(){var e=JSON.parse(localStorage.getItem("userInfo")),t=Object(j.f)();return Object(a.useEffect)((function(){null===e?t.push("/component/LogIn"):null!==e&&!0===e.isAdmin?t.push("/component/VacationAdmin"):t.push("/component/VacationList")}),[]),Object(h.jsxs)(j.c,{children:[Object(h.jsxs)(j.a,{path:"/component/LogIn",children:[" ",Object(h.jsx)(O,{})," "]}),Object(h.jsxs)(j.a,{path:"/component/SignUp",children:[Object(h.jsx)(x,{})," "]}),Object(h.jsxs)(j.a,{path:"/component/LogOut",children:[" ",Object(h.jsx)(f,{})," "]}),Object(h.jsxs)(j.a,{path:"/component/VacationList",children:[Object(h.jsx)(v,{})," "]}),Object(h.jsxs)(j.a,{path:"/component/VacationAdmin",children:[Object(h.jsx)(C,{})," "]}),Object(h.jsx)(j.a,{path:"/component/Statistics",children:Object(h.jsx)(k,{})})]})}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,309)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(S.a,{children:Object(h.jsx)(_,{})})}),document.getElementById("root")),A()}},[[291,1,2]]]);
//# sourceMappingURL=main.e1e75ef7.chunk.js.map